class MangaForFreeSource extends ComicSource{name="MangaForFree";key="mangaforfree";version="1.0.3";minAppVersion="1.0.0";url="https://mangaforfree.com";lang="en";isNsfw=false;supportSearch=true;supportLatest=true;supportCategory=false;async getLatestUpdates(e=1){const t=`${this.url}/`,n=await fetch(t,{headers:this.getHeaders()});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=await n.text(),s=new DOMParser().parseFromString(a,"text/html"),i=[];return s.querySelectorAll("article").forEach(t=>{const n=t.querySelector("a"),a=t.querySelector("img"),s=t.querySelector("h3");n&&a&&s&&i.push({id:n.href.split("/").pop()||"",title:s.textContent?.trim()||"",cover:a.src||"",url:n.href,tags:[],lastChapter:"",updateTime:Date.now()})}),i.slice(0,30)}async search(e,t=1){const n=encodeURIComponent(e),a=`${this.url}/?s=${n}&post_type=wp-manga&paged=${t}`,s=await fetch(a,{headers:this.getHeaders()});if(!s.ok)throw new Error(`HTTP ${s.status}`);const i=await s.text(),r=new DOMParser().parseFromString(i,"text/html"),o=[];return r.querySelectorAll(".c-tabs-item__content").forEach(e=>{const t=e.querySelector("a"),n=e.querySelector("img"),a=e.querySelector(".post-title h3");t&&n&&a&&o.push({id:t.href.split("/").pop()||"",title:a.textContent?.trim()||"",cover:n.src||"",url:t.href,tags:[],lastChapter:"",updateTime:Date.now()})}),o}async getComicDetail(e){const t=`${this.url}/manga/${e}/`,n=await fetch(t,{headers:this.getHeaders()});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=await n.text(),s=new DOMParser().parseFromString(a,"text/html"),i=s.querySelector(".post-title h1")?.textContent?.trim()||"",r=s.querySelector(".summary__content p")?.textContent?.trim()||"",o=[];return s.querySelectorAll(".wp-manga-chapter").forEach(e=>{const t=e.querySelector("a");t&&o.unshift({id:t.href.split("/").pop()?.replace("/","")||"",title:e.querySelector(".chapter-manhwa")?.textContent?.trim()||t.textContent?.trim()||"",url:t.href,sort:o.length})}),{id:e,title:i,cover:s.querySelector(".summary_image img")?.src||"",description:r,author:"",status:"",tags:[],chapters:o}}async getChapterImages(e,t){const n=`${this.url}/manga/${e}/${t}/`,a=await fetch(n,{headers:this.getHeaders()});if(!a.ok)throw new Error(`HTTP ${a.status}`);const s=await a.text(),i=new DOMParser().parseFromString(s,"text/html"),r=[];return i.querySelectorAll(".reading-content img").forEach(e=>{e.src&&r.push(e.src)}),r}getHeaders(){return{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","Referer":this.url+"/"}}}
